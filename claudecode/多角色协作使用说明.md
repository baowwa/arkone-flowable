# Claude Code 多角色协作使用说明

## 已安装的角色

以下角色已全局安装在 `~/.claude/agents/`，可在任何项目中使用：

- **business-analyst** - 业务分析师：需求分析、用户场景、业务流程
- **product-manager** - 产品经理：功能定义、优先级、产品方案
- **ui-designer** - UI 设计师：界面设计、交互流程、用户体验
- **architect-reviewer** - 架构师：系统架构、技术选型、架构审查
- **backend-developer** - 后端开发：API 实现、数据库设计、服务端逻辑
- **frontend-developer** - 前端开发：UI 实现、前端交互、组件开发
- **测试工程师** - 测试工程师：测试策略、质量保证、自动化测试
- **multi-agent-coordinator** - 多代理协调器：自动管理多角色工作流
- **workflow-orchestrator** - 工作流编排器：复杂流程自动化

## 使用方式

### 方式 1：顺序调用（适合有明确流程的场景）

按照开发流程依次调用各个角色：

```bash
# 1. 业务分析阶段
"让 business-analyst 分析这个需求：[描述你的需求]"

# 2. 产品设计阶段
"让 product-manager 基于业务分析结果，制定产品方案"

# 3. UI 设计阶段
"让 ui-designer 设计用户界面和交互流程"

# 4. 架构设计阶段
"让 architect-reviewer 设计系统架构"

# 5. 开发阶段
"让 backend-developer 实现后端 API"
"让 frontend-developer 实现前端界面"

# 6. 测试阶段
"让测试工程师设计测试用例并执行质量验证"
```

### 方式 2：使用编排代理（推荐）

让协调器自动管理整个工作流：

```bash
"使用 multi-agent-coordinator 协调以下角色完成新功能开发：
1. business-analyst - 分析需求
2. product-manager - 制定方案
3. ui-designer - 设计界面
4. architect-reviewer - 审查架构
5. backend-developer - 开发后端
6. frontend-developer - 开发前端
7. 测试工程师 - 测试验证

需求描述：[你的具体需求]"
```

### 方式 3：一次性请求多角色协作

直接在一个请求中指定所有需要的角色：

```bash
"我要开发 [功能名称]，请协调以下角色：
- business-analyst：分析业务需求和用户场景
- product-manager：定义功能范围和优先级
- ui-designer：设计界面
- architect-reviewer：设计数据模型和 API 架构
- backend-developer：实现后端逻辑
- frontend-developer：实现前端界面
- 测试工程师：设计测试用例并执行质量保证"
```

## 实际使用示例

### 示例 1：开发新功能

```bash
"我要为 Flowable 工作流系统添加流程监控功能，请协调：
- business-analyst：分析监控需求（实时状态、历史记录、性能指标）
- product-manager：定义监控面板的功能优先级
- ui-designer：设计监控仪表盘界面
- architect-reviewer：设计监控数据采集和存储架构
- backend-developer：实现监控 API 和数据采集
- frontend-developer：实现监控仪表盘 UI
- 测试工程师：测试监控功能的准确性和性能"
```

### 示例 2：代码审查和优化

```bash
"让 architect-reviewer 审查当前的工作流引擎架构，
然后让 backend-developer 根据审查意见进行优化，
最后让测试工程师验证优化效果"
```

### 示例 3：需求分析到实现

```bash
# 第一步：需求分析
"让 business-analyst 分析用户对流程审批的需求"

# 第二步：产品方案（基于分析结果）
"基于上述分析，让 product-manager 制定审批功能的产品方案"

# 第三步：设计和开发
"根据产品方案，让 ui-designer 设计审批界面，
让 backend-developer 实现审批 API"
```

## 项目特定配置（可选）

如果需要为本项目定制特定角色的行为：

```bash
# 1. 创建项目级代理目录
mkdir -p .claude/agents

# 2. 复制全局代理到项目
cp ~/.claude/agents/backend-developer.md .claude/agents/

# 3. 编辑项目级代理，添加项目特定规则
# 例如：添加 Flowable 特定的编码规范、技术栈约束等

# 注意：项目级代理优先级高于全局代理
```

## 代理存储位置

| 类型 | 路径 | 作用范围 | 优先级 |
|------|------|---------|--------|
| 全局代理 | `~/.claude/agents/` | 所有项目 | 低 |
| 项目代理 | `.claude/agents/` | 当前项目 | 高 |

## 管理代理

```bash
# 查看已安装的全局代理
ls -1 ~/.claude/agents/ | sed 's/.md$//'

# 在 Claude Code 中打开代理管理器
/agents

# 查看特定代理的定义
cat ~/.claude/agents/backend-developer.md
```

## 工作流建议

### 标准开发流程

```
需求 → business-analyst
  ↓
产品方案 → product-manager
  ↓
界面设计 → ui-designer
  ↓
架构设计 → architect-reviewer
  ↓
后端开发 → backend-developer
  ↓
前端开发 → frontend-developer
```

### 快速迭代流程

```
需求 → business-analyst + product-manager（并行）
  ↓
ui-designer + architect-reviewer（并行）
  ↓
backend-developer + frontend-developer（并行）
```

## 注意事项

1. **自动识别**：Claude Code 会根据��话内容自动调用合适的代理，无需每次都显式指定
2. **显式调用**：使用 "让 [代理名] 做..." 可以明确指定使用哪个代理
3. **上下文传递**：后续调用的代理可以看到之前的对话内容，实现协作
4. **独立上下文**：每个代理在独立的上下文空间运行，不会污染主对话
5. **工具权限**：不同代理有不同的工具访问权限，确保安全性

## 更多代理

如果需要其他专业角色，可以从 awesome-claude-code-subagents 仓库安装：

```bash
# 查看所有可用代理
cd /Users/bao/Documents/project/personal/awesome-claude-code/awesome-claude-code-subagents
ls categories/*/

# 安装其他代理（例如：测试专家）
cp categories/04-quality-security/qa-expert.md ~/.claude/agents/

# 安装数据库专家
cp categories/03-infrastructure/database-administrator.md ~/.claude/agents/
```

## 快速参考

```bash
# 业务分析
"让 business-analyst 分析 [需求]"

# 产品设计
"让 product-manager 制定 [功能] 的产品方案"

# UI 设计
"让 ui-designer 设计 [界面]"

# 架构审查
"让 architect-reviewer 审查 [架构/代码]"

# 后端开发
"让 backend-developer 实现 [API/功能]"

# 前端开发
"让 frontend-developer 实现 [界面/组件]"

# 多角色协作
"使用 multi-agent-coordinator 协调 [角色列表] 完成 [任务]"
```

## 获取帮助

- 查看代理定义：`cat ~/.claude/agents/[代理名].md`
- 代理管理器：在 Claude Code 中输入 `/agents`
- 项目仓库：https://github.com/VoltAgent/awesome-claude-code-subagents
